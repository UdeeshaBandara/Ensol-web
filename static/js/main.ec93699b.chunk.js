(this["webpackJsonpEnsol Admin"]=this["webpackJsonpEnsol Admin"]||[]).push([[0],{127:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var s=a(0),r=a.n(s),n=a(14),c=a.n(n),i=a(27),l=a(11),o=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,199)).then((function(t){var a=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),s(e),r(e),n(e),c(e)}))},d=(a(127),a(1));var j=a(8),h=a.n(j),b=a(13),u=a(17),p=a(25),x=a(26),m=a(29),O=a(28),f=a(15),v=a.n(f),g=(a(94),a(22)),w=(a(55),a.p+"static/media/company_logo.8d8fd1e7.png"),y=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(p.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",token:""},e.changeHandler=function(t){e.setState(Object(u.a)({},t.target.name,t.target.value))},e.submitHandler=function(){var t=Object(b.a)(h.a.mark((function t(a){var s,r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),s={email:e.state.email,password:e.state.password},!navigator.onLine){t.next=29;break}if(t.prev=3,s.email&&0!==s.email.length){t.next=8;break}e.notify("Invalid email address"),t.next=22;break;case 8:if(s.password&&0!==s.email.password){t.next=12;break}e.notify("Invalid password"),t.next=22;break;case 12:if(!s){t.next=21;break}return t.next=15,v.a.post("https://ensolapi.herokuapp.com/admin/auth",s);case 15:r=t.sent,n=r.data,console.log(n),n.status?(sessionStorage.setItem("token",n.accessToken),sessionStorage.setItem("email",e.state.email),window.location.href="/dashboard"):e.notify(n.data),t.next=22;break;case 21:e.notify("Failed to get values of the fields");case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(3),e.notify(t.t0.message+" : "+t.t0.response.data);case 27:t.next=30;break;case 29:e.notify("Please check your internet connection");case 30:case"end":return t.stop()}}),t,null,[[3,24]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(x.a)(a,[{key:"notify",value:function(e){g.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password;return Object(d.jsxs)("div",{className:"login",children:[Object(d.jsx)(i.b,{to:"/",children:Object(d.jsx)("img",{alt:"logo image",className:"login_logo",src:w})}),Object(d.jsx)("div",{children:Object(d.jsx)(g.a,{})}),Object(d.jsxs)("div",{className:"login_container",children:[Object(d.jsx)("h1",{children:"Sign-in"}),Object(d.jsxs)("form",{children:[Object(d.jsx)("h5",{children:"E-mail"}),Object(d.jsx)("input",{type:"text",name:"email",value:t,onChange:this.changeHandler,className:"login_text"}),Object(d.jsx)("h5",{children:"Password"}),Object(d.jsx)("input",{type:"password",name:"password",value:a,onChange:this.changeHandler,className:"login_text"}),Object(d.jsx)("button",{type:"submit",className:"login_signInButton",onClick:this.submitHandler,children:"Sign In"})]})]})]})}}]),a}(s.Component),k=a(198),C=a(196),S=a(103),D=(a(75),a(76),a(77),a(37)),N=a(21),I=a(195),P=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(p.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={orders:[],startDate:new Date,endDate:new Date,filteredOrders:[],repair_count:0,total_machines:0,rented_machines:0,user_count:0,filterText:"Filter",filterResetText:"Reset"},e.handleRowClick=function(e){window.location.href="/orders/search?id="+e},e.setStartDate=function(t){e.setState({startDate:t})},e.setEndDate=function(t){e.setState({endDate:t})},e.handleDateChange=function(t){e.state.startDate=t},e.filterHandler=function(){var t=Object(b.a)(h.a.mark((function t(a){var s,r,n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),s={endDate:e.state.endDate,startDate:e.state.startDate},t.next=4,v.a.post("https://ensolapi.herokuapp.com/admin/order/filter",s,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 4:r=t.sent,n=r.data,c=n.data.orders.map((function(e){return 0==e.orderStatus?(e.orderStatus="Cancelled",e.color="#F44336"):1==e.orderStatus?(e.orderStatus="Completed",e.color="#4CAF50"):2==e.orderStatus?(e.orderStatus="Accepted",e.color="#3F51B5"):3==e.orderStatus&&(e.orderStatus="Pending",e.color="#FF5722"),{id:e.id,username:e.user.name,address:e.user.address,telephone:e.user.telephone,price:e.price,status:e.orderStatus,color:e.color}})),e.setState({filteredOrders:c});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.filterReset=function(){var t=Object(b.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.setState({filteredOrders:e.state.orders});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.logOut=function(){sessionStorage.clear(),window.location.href="/"},e}return Object(x.a)(a,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{class:"container-scroller",children:[Object(d.jsxs)("nav",{class:"navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row",children:[Object(d.jsx)("div",{class:"text-center navbar-brand-wrapper d-flex align-items-center justify-content-center",children:Object(d.jsx)("img",{style:{width:70,height:70},src:w})}),Object(d.jsxs)("div",{class:"navbar-menu-wrapper d-flex align-items-center justify-content-end",children:[Object(d.jsx)("ul",{class:"navbar-nav navbar-nav-right",children:Object(d.jsx)("li",{class:"nav-item nav-profile dropdown",children:Object(d.jsx)("a",{class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",id:"profileDropdown",children:Object(d.jsx)(k.a,{children:Object(d.jsx)(C.a,{title:sessionStorage.getItem("email"),children:Object(d.jsx)(C.a.Item,{onClick:this.logOut,children:"Logout"})})})})})}),Object(d.jsx)("button",{class:"navbar-toggler navbar-toggler-right d-lg-none align-self-center",type:"button","data-toggle":"offcanvas",children:Object(d.jsx)("span",{class:"ti-view-list"})})]})]}),Object(d.jsxs)("div",{class:"container-fluid page-body-wrapper",children:[Object(d.jsx)("nav",{class:"sidebar sidebar-offcanvas",id:"sidebar",children:Object(d.jsxs)("ul",{class:"nav",children:[Object(d.jsx)("li",{class:"nav-item",children:Object(d.jsxs)("a",{class:"nav-link",href:"/dashboard",children:[Object(d.jsx)("i",{class:"ti-shield menu-icon"}),Object(d.jsx)("span",{class:"menu-title",children:"Dashboard"})]})}),Object(d.jsx)("li",{class:"nav-item",children:Object(d.jsxs)("a",{class:"nav-link","data-bs-toggle":"collapse",href:"/machine","aria-expanded":"false","aria-controls":"ui-basic",children:[Object(d.jsx)("i",{class:"ti-plug menu-icon"}),Object(d.jsx)("span",{class:"menu-title",children:"Machines"})]})}),Object(d.jsx)("li",{class:"nav-item",children:Object(d.jsxs)(i.b,{class:"nav-link",to:"/repairs",children:[Object(d.jsx)("i",{className:"ti-settings menu-icon"}),Object(d.jsx)("span",{class:"menu-title",children:"Repairs"})]})})]})}),Object(d.jsxs)("div",{class:"main-panel",children:[Object(d.jsxs)("div",{class:"content-wrapper",children:[Object(d.jsx)("div",{class:"row",children:Object(d.jsx)("div",{class:"col-md-12 grid-margin",children:Object(d.jsx)("div",{class:"d-flex justify-content-between align-items-center",children:Object(d.jsx)("div",{children:Object(d.jsx)("h4",{class:"font-weight-bold mb-0",children:"Dashboard"})})})})}),Object(d.jsxs)("div",{class:"row",children:[Object(d.jsx)("div",{class:"col-md-3 grid-margin stretch-card",children:Object(d.jsx)("div",{class:"card",children:Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsx)("p",{class:"card-title text-md-center text-xl-left",children:"Total Machines"}),Object(d.jsxs)("div",{class:"d-flex flex-wrap justify-content-between justify-content-md-center justify-content-xl-between align-items-center",children:[Object(d.jsx)("h3",{class:"mb-0 mb-md-2 mb-xl-0 order-md-1 order-xl-0",children:this.state.total_machines}),Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-bag-check-fill",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{"fill-rule":"evenodd",d:"M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0zm-.646 5.354a.5.5 0 0 0-.708-.708L7.5 10.793 6.354 9.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0l3-3z"})})]})]})})}),Object(d.jsx)("div",{class:"col-md-3 grid-margin stretch-card",children:Object(d.jsx)("div",{class:"card",children:Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsx)("p",{class:"card-title text-md-center text-xl-left",children:"Rented Machines"}),Object(d.jsxs)("div",{class:"d-flex flex-wrap justify-content-between justify-content-md-center justify-content-xl-between align-items-center",children:[Object(d.jsx)("h3",{class:"mb-0 mb-md-2 mb-xl-0 order-md-1 order-xl-0",children:this.state.rented_machines}),Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-bag-dash-fill",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{"fill-rule":"evenodd",d:"M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0zM6 9.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1H6z"})})]})]})})}),Object(d.jsx)("div",{class:"col-md-3 grid-margin stretch-card",children:Object(d.jsx)("div",{class:"card",children:Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsx)("p",{class:"card-title text-md-center text-xl-left",children:"Repairs Count"}),Object(d.jsxs)("div",{class:"d-flex flex-wrap justify-content-between justify-content-md-center justify-content-xl-between align-items-center",children:[Object(d.jsx)("h3",{class:"mb-0 mb-md-2 mb-xl-0 order-md-1 order-xl-0",children:this.state.repair_count}),Object(d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-bag-x-fill",viewBox:"0 0 16 16",children:Object(d.jsx)("path",{"fill-rule":"evenodd",d:"M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5v-.5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0zM6.854 8.146a.5.5 0 1 0-.708.708L7.293 10l-1.147 1.146a.5.5 0 0 0 .708.708L8 10.707l1.146 1.147a.5.5 0 0 0 .708-.708L8.707 10l1.147-1.146a.5.5 0 0 0-.708-.708L8 9.293 6.854 8.146z"})})]})]})})}),Object(d.jsx)("div",{class:"col-md-3 grid-margin stretch-card",children:Object(d.jsx)("div",{class:"card",children:Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsx)("p",{class:"card-title text-md-center text-xl-left",children:"User Count"}),Object(d.jsxs)("div",{class:"d-flex flex-wrap justify-content-between justify-content-md-center justify-content-xl-between align-items-center",children:[Object(d.jsx)("h3",{class:"mb-0 mb-md-2 mb-xl-0 order-md-1 order-xl-0",children:this.state.user_count}),Object(d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",fill:"currentColor",class:"bi bi-people-fill",viewBox:"0 0 16 16",children:[Object(d.jsx)("path",{d:"M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}),Object(d.jsx)("path",{"fill-rule":"evenodd",d:"M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"}),Object(d.jsx)("path",{d:"M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"})]})]})]})})})]}),Object(d.jsxs)("div",{style:{textAlign:"right"},children:[Object(d.jsx)(N.a,{utils:D.a,children:Object(d.jsx)(I.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:"Start Date",value:this.state.startDate,onChange:function(t){return e.setStartDate(t)},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(d.jsx)(N.a,{utils:D.a,children:Object(d.jsx)(I.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline2",label:"End Date",value:this.state.endDate,onChange:function(t){return e.setEndDate(t)},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(d.jsx)("button",{style:{marginTop:15,marginLeft:15,color:"white"},type:"submit",class:"btn btn-warning me-2",onClick:this.filterHandler,children:this.state.filterText}),Object(d.jsx)("button",{style:{marginTop:15,color:"white"},type:"submit",class:"btn btn-danger",onClick:this.filterReset,children:this.state.filterResetText})]}),Object(d.jsx)("div",{class:"row",children:Object(d.jsx)("div",{class:"col-md-12 grid-margin stretch-card",children:Object(d.jsx)("div",{class:"card position-relative",children:Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsx)("p",{class:"card-title mb-0",children:"Orders"}),Object(d.jsx)("div",{class:"table-responsive",children:Object(d.jsxs)("table",{class:"table table-hover",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Order Id"}),Object(d.jsx)("th",{children:"Customer"}),Object(d.jsx)("th",{children:"Customer address"}),Object(d.jsx)("th",{children:"Telephone"}),Object(d.jsx)("th",{children:"Price"}),Object(d.jsx)("th",{children:"Order status"})]})}),Object(d.jsx)("tbody",{children:this.state.filteredOrders?this.state.filteredOrders.map((function(t){return Object(d.jsxs)("tr",{onClick:function(){return e.handleRowClick(t.id)},children:[Object(d.jsx)("td",{children:t.id}),Object(d.jsx)("td",{children:t.username}),Object(d.jsx)("td",{children:t.address}),Object(d.jsx)("td",{children:t.telephone}),Object(d.jsx)("td",{children:t.price}),Object(d.jsx)("td",{children:Object(d.jsx)(S.a,{style:{backgroundColor:t.color,borderColor:t.color,color:"white",width:"125px"},children:t.status})})]},t.id)})):null})]})})]})})})})]}),Object(d.jsx)("footer",{class:"footer",children:Object(d.jsx)("div",{class:"d-sm-flex justify-content-center justify-content-sm-between",children:Object(d.jsx)("span",{class:"text-muted text-center text-sm-left d-block d-sm-inline-block",children:"Copyright \xa9 RWP 2022"})})})]})]})]})}},{key:"componentDidMount",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,a,s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://ensolapi.herokuapp.com/admin/dashboardValues",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 2:t=e.sent,a=t.data,s=a.data.orders.map((function(e){return 0==e.orderStatus?(e.orderStatus="Cancelled",e.color="#F44336"):1==e.orderStatus?(e.orderStatus="Completed",e.color="#4CAF50"):2==e.orderStatus?(e.orderStatus="Accepted",e.color="#3F51B5"):3==e.orderStatus&&(e.orderStatus="Pending",e.color="#FF5722"),{id:e.id,username:e.user.name,address:e.user.address,telephone:e.user.telephone,price:e.price,status:e.orderStatus,color:e.color}})),r=a.data.repairs.map((function(e){return 0==e.status?(e.status="Cancelled",e.color="#F44336"):1==e.status?(e.status="Completed",e.color="#4CAF50"):2==e.status?(e.status="Accepted",e.color="#3F51B5"):3==e.status&&(e.status="Pending",e.color="#FF5722"),{id:e.id,description:e.description,username:e.order.user.name,address:e.order.user.address,telephone:e.order.user.telephone,status:e.status,color:e.color}})),this.setState({orders:s,filteredOrders:s,repairs:r,filteredRepairs:r,repair_count:a.data.top_values.repair_count,total_machines:a.data.top_values.total_machines,rented_machines:a.data.top_values.rented_machines,user_count:a.data.top_values.user_count});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.Component);window.addEventListener("pageshow",(function(e){(e.persisted||"undefined"!=typeof window.performance&&2===window.performance.navigation.type)&&window.location.reload()}));var R=P,A=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(p.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={machines:[],oid:"",total:0,odate:"",status:"",username:"",address:"",tele:"",newstatus:0},e.onChangeHandler=function(t){var a=t.target.selectedIndex,s=t.target.childNodes[a].getAttribute("id");e.state.newstatus=s,console.log("Selected option "+s)},e.submitHandler=function(){var t=Object(b.a)(h.a.mark((function t(a){var s,r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),console.log("Order Status: ",e.state.newstatus),s={orderStatus:e.state.newstatus},!navigator.onLine){t.next=26;break}if(t.prev=4,-1!==s){t.next=9;break}e.notify("Invalid order status"),t.next=19;break;case 9:if(!s){t.next=18;break}return t.next=12,v.a.put("https://ensolapi.herokuapp.com/order/"+e.state.oid,s,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 12:r=t.sent,n=r.data,console.log(n),n.status?window.location.reload():e.notify(n.data),t.next=19;break;case 18:e.notify("Failed to get the order status");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(4),e.notify(t.t0.message+" : "+t.t0.response.data);case 24:t.next=27;break;case 26:e.notify("Please check your internet connection");case 27:case"end":return t.stop()}}),t,null,[[4,21]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(x.a)(a,[{key:"notify",value:function(e){g.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},{key:"render",value:function(){return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)("div",{class:"card",children:Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsx)("h4",{class:"card-title",children:"Order Deails"}),Object(d.jsxs)("p",{class:"card-description",children:["Order Id : ",this.state.oid]}),Object(d.jsxs)("form",{class:"forms-sample",children:[Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputName1",children:"Order Total"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Total",value:this.state.total})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputEmail3",children:"Order Date"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Order date",value:this.state.odate})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputEmail3",children:"Order Status"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Order status",value:this.state.status})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputPassword4",children:"Customer"}),Object(d.jsx)("input",{type:"text",class:"form-control",id:"exampleInputPassword4",placeholder:"Username",value:this.state.username})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputPassword4",children:"Customer address"}),Object(d.jsx)("input",{type:"text",class:"form-control",id:"exampleInputPassword4",placeholder:"User address",value:this.state.address})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputPassword4",children:"Telephone number"}),Object(d.jsx)("input",{type:"text",class:"form-control",id:"exampleInputPassword4",placeholder:"Telephone number",value:this.state.tele})]}),Object(d.jsx)("div",{class:"row"})]})]})})}),Object(d.jsx)("div",{children:Object(d.jsx)("div",{class:"card position-relative",children:Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsx)("p",{class:"card-title mb-0",children:"Machines"}),Object(d.jsx)("div",{class:"table-responsive",children:Object(d.jsxs)("table",{class:"table table-hover",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Image"}),Object(d.jsx)("th",{children:"Machine name"}),Object(d.jsx)("th",{children:"Price"}),Object(d.jsx)("th",{children:"Quantity"}),Object(d.jsx)("th",{children:"Contract Start Date"}),Object(d.jsx)("th",{children:"Contract End Date"})]})}),Object(d.jsx)("tbody",{children:this.state.machines?this.state.machines.map((function(e){return Object(d.jsxs)("tr",{children:[e.image[0].length>0?Object(d.jsx)("td",{children:Object(d.jsx)("img",{style:{width:100,height:100},alt:"logo image",src:e.image[0]})}):null,Object(d.jsx)("td",{children:e.mname}),Object(d.jsx)("td",{children:e.price}),Object(d.jsx)("td",{children:e.qty}),Object(d.jsx)("td",{children:e.sdate}),Object(d.jsx)("td",{children:e.edate})]})})):null})]})})]})})}),Object(d.jsx)("div",{children:Object(d.jsx)("div",{class:"card position-relative",children:Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsx)("div",{class:"table-responsive"}),"Cancelled"!==this.state.status?Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("p",{class:"card-title mb-0",children:"Update Order Status"}),Object(d.jsxs)("select",{class:"form-control",id:"statusDropDown",onChange:this.onChangeHandler,children:[Object(d.jsx)("option",{id:"0",children:"Cancel"}),Object(d.jsx)("option",{id:"1",children:"Complete"}),Object(d.jsx)("option",{id:"2",children:"Accept"})]})]}),Object(d.jsx)("button",{type:"submit",class:"btn btn-warning me-2",onClick:this.submitHandler,children:"Update"})]}):null]})})})]})}},{key:"componentDidMount",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,a,s,r,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),a=t.get("id"),e.next=4,v.a.get("https://ensolapi.herokuapp.com/order/"+a,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 4:s=e.sent,r=s.data,n=r.data.machines.map((function(e){return{mname:e.machineType,price:e.rentPrice,qty:e.OrderMachines.quantity,edate:e.OrderMachines.contractEndDate.substring(0,10),sdate:e.OrderMachines.contractStartDate.substring(0,10),image:JSON.parse(e.images)}})),0==(c=r.data.orderStatus)?c="Cancelled":1==c?c="Completed":2==c?c="Accepted":3==c&&(c="Pending"),this.setState({machines:n,oid:r.data.id,total:r.data.price,status:c,odate:r.data.orderDate.substring(0,10),username:r.data.user.name,address:r.data.user.address,tele:r.data.user.telephone}),console.log(r);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.Component),M=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(p.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={rid:"",description:"",oid:"",odate:"",mtype:"",status:"",username:"",address:"",tele:"",image:"",sdate:"",edate:"",newstatus:0},e.onChangeHandler=function(t){var a=t.target.selectedIndex,s=t.target.childNodes[a].getAttribute("id");e.state.newstatus=s,console.log("Selected option "+s)},e.submitHandler=function(){var t=Object(b.a)(h.a.mark((function t(a){var s,r,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),console.log("Repair Status: ",e.state.newstatus),s={status:e.state.newstatus},!navigator.onLine){t.next=26;break}if(t.prev=4,-1!==s){t.next=9;break}e.notify("Invalid repair status"),t.next=19;break;case 9:if(!s){t.next=18;break}return t.next=12,v.a.put("https://ensolapi.herokuapp.com/repair/"+e.state.rid,s,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 12:r=t.sent,n=r.data,console.log(n),n.status?window.location.reload():e.notify(n.data),t.next=19;break;case 18:e.notify("Failed to get the repair status");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(4),e.notify(t.t0.message+" : "+t.t0.response.data);case 24:t.next=27;break;case 26:e.notify("Please check your internet connection");case 27:case"end":return t.stop()}}),t,null,[[4,21]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(x.a)(a,[{key:"notify",value:function(e){g.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}},{key:"render",value:function(){return Object(d.jsx)("div",{children:Object(d.jsx)("div",{class:"card",children:Object(d.jsxs)("div",{class:"card-body",children:[Object(d.jsx)("h4",{class:"card-title",children:"Repair Details"}),Object(d.jsxs)("p",{class:"card-description",children:["Repair Id : ",this.state.rid]}),Object(d.jsxs)("form",{class:"forms-sample",children:[Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputName1",children:"Description"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Description",value:this.state.description})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputEmail3",children:"Order Id"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Order Id",value:this.state.oid})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputEmail3",children:"Order Date"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Order date",value:this.state.odate})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputEmail3",children:"Contract Start Date"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Order date",value:this.state.sdate})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputEmail3",children:"Contract End Date"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Order date",value:this.state.edate})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputEmail3",children:"Machine Type"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Order date",value:this.state.mtype})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputEmail3",children:"Machine Image"})," ",Object(d.jsx)("br",{}),Object(d.jsx)("img",{style:{height:200,marginLeft:"50px"},alt:"machine image",src:this.state.image})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputEmail3",children:"Repair Status"}),Object(d.jsx)("input",{type:"text",class:"form-control",placeholder:"Repair status",value:this.state.status})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputPassword4",children:"Customer Name"}),Object(d.jsx)("input",{type:"text",class:"form-control",id:"exampleInputPassword4",placeholder:"Customer Name",value:this.state.username})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputPassword4",children:"Customer address"}),Object(d.jsx)("input",{type:"text",class:"form-control",id:"exampleInputPassword4",placeholder:"Customer address",value:this.state.address})]}),Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleInputPassword4",children:"Telephone number"}),Object(d.jsx)("input",{type:"text",class:"form-control",id:"exampleInputPassword4",placeholder:"Telephone number",value:this.state.tele})]}),"Cancelled"!==this.state.status?Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{class:"form-group",children:[Object(d.jsx)("label",{for:"exampleSelectGender",children:"Update Repair Status"}),Object(d.jsxs)("select",{class:"form-control",id:"statusDropDown",onChange:this.onChangeHandler,children:[Object(d.jsx)("option",{id:"0",children:"Cancel"}),Object(d.jsx)("option",{id:"1",children:"Complete"}),Object(d.jsx)("option",{id:"2",children:"Accept"})]})]}),Object(d.jsx)("button",{type:"submit",class:"btn btn-warning me-2",onClick:this.submitHandler,children:"Update"})]}):null]})]})})})}},{key:"componentDidMount",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,a,s,r,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),a=t.get("id"),e.next=4,v.a.get("https://ensolapi.herokuapp.com/repair/"+a,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 4:s=e.sent,r=s.data,0==(n=r.data.status)?n="Cancelled":1==n?n="Completed":2==n?n="Ongoing":3==n&&(n="Pending"),c=JSON.parse(r.data.machine.images),null!=r.data.machine.contractStartDate&&this.setState({sdate:r.data.machine.contractStartDate.substring(0,10)}),null!=r.data.machine.contractEndDate&&this.setState({edate:r.data.machine.contractEndDate.substring(0,10)}),null!=r.data.order.orderDate&&this.setState({odate:r.data.order.orderDate.substring(0,10)}),this.setState({rid:r.data.id,description:r.data.description,image:c[0],mtype:r.data.machine.machineType,status:n,oid:r.data.order.id,username:r.data.order.user.name,address:r.data.order.user.address,tele:r.data.order.user.telephone}),console.log(r);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.Component),T=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(p.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={repairs:[],filteredRepairs:[],startDate:new Date,endDate:new Date,filterText:"Filter",filterResetText:"Reset"},e.handleRowClick=function(e){window.location.href="/repairs/search?id="+e},e.setStartDate=function(t){e.setState({startDate:t})},e.setEndDate=function(t){e.setState({endDate:t})},e.logOut=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.clear(),window.location.href="/";case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.filterReset=function(){var t=Object(b.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.setState({filteredRepairs:e.state.repairs});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.filterHandler=function(){var t=Object(b.a)(h.a.mark((function t(a){var s,r,n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),e.state.filterOn2=!e.state.filterOn2,s={endDate:e.state.endDate,startDate:e.state.startDate},t.next=5,v.a.post("https://ensolapi.herokuapp.com/admin/repair/filter",s,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 5:r=t.sent,n=r.data,c=n.data.repairs.map((function(e){return 0==e.status?(e.status="Cancelled",e.color="#F44336"):1==e.status?(e.status="Completed",e.color="#4CAF50"):2==e.status?(e.status="Accepted",e.color="#3F51B5"):3==e.status&&(e.status="Pending",e.color="#FF5722"),{id:e.id,description:e.description,username:e.order.user.name,address:e.order.user.address,telephone:e.order.user.telephone,status:e.status,color:e.color}})),e.setState({filteredRepairs:c});case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(x.a)(a,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{class:"container-scroller",children:[Object(d.jsxs)("nav",{class:"navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row",children:[Object(d.jsx)("div",{class:"text-center navbar-brand-wrapper d-flex align-items-center justify-content-center",children:Object(d.jsx)("img",{style:{width:70,height:70},src:w})}),Object(d.jsxs)("div",{class:"navbar-menu-wrapper d-flex align-items-center justify-content-end",children:[Object(d.jsx)("ul",{class:"navbar-nav navbar-nav-right",children:Object(d.jsx)("li",{class:"nav-item nav-profile dropdown",children:Object(d.jsx)("a",{class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",id:"profileDropdown",children:Object(d.jsx)(k.a,{children:Object(d.jsx)(C.a,{title:sessionStorage.getItem("email"),children:Object(d.jsx)(C.a.Item,{onClick:this.logOut,children:"Logout"})})})})})}),Object(d.jsx)("button",{class:"navbar-toggler navbar-toggler-right d-lg-none align-self-center",type:"button","data-toggle":"offcanvas",children:Object(d.jsx)("span",{class:"ti-view-list"})})]})]}),Object(d.jsxs)("div",{class:"container-fluid page-body-wrapper",children:[Object(d.jsx)("nav",{class:"sidebar sidebar-offcanvas",id:"sidebar",children:Object(d.jsxs)("ul",{class:"nav",children:[Object(d.jsx)("li",{class:"nav-item",children:Object(d.jsxs)("a",{class:"nav-link",href:"/dashboard",children:[Object(d.jsx)("i",{class:"ti-shield menu-icon"}),Object(d.jsx)("span",{class:"menu-title",children:"Dashboard"})]})}),Object(d.jsx)("li",{class:"nav-item",children:Object(d.jsxs)("a",{class:"nav-link","data-bs-toggle":"collapse",href:"/machine","aria-expanded":"false","aria-controls":"ui-basic",children:[Object(d.jsx)("i",{class:"ti-plug menu-icon"}),Object(d.jsx)("span",{class:"menu-title",children:"Machines"})]})}),Object(d.jsx)("li",{class:"nav-item",children:Object(d.jsxs)(i.b,{class:"nav-link",to:"/repairs",children:[Object(d.jsx)("i",{className:"ti-settings menu-icon"}),Object(d.jsx)("span",{class:"menu-title",children:"Repairs"})]})})]})}),Object(d.jsxs)("div",{class:"main-panel",children:[Object(d.jsxs)("div",{class:"content-wrapper",children:[Object(d.jsx)("div",{class:"row",children:Object(d.jsx)("div",{class:"col-md-12 grid-margin",children:Object(d.jsx)("div",{class:"d-flex justify-content-between align-items-center",children:Object(d.jsx)("div",{children:Object(d.jsx)("h4",{class:"font-weight-bold mb-0",children:"Repairs"})})})})}),Object(d.jsxs)("div",{style:{textAlign:"right"},children:[Object(d.jsx)(N.a,{utils:D.a,children:Object(d.jsx)(I.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",label:"Start Date",value:this.state.startDate,onChange:function(t){return e.setStartDate(t)},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(d.jsx)(N.a,{utils:D.a,children:Object(d.jsx)(I.a,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline2",label:"End Date",value:this.state.endDate,onChange:function(t){return e.setEndDate(t)},KeyboardButtonProps:{"aria-label":"change date"}})}),Object(d.jsx)("button",{style:{marginTop:15,color:"white"},type:"submit",class:"btn btn-warning me-2",onClick:this.filterHandler,children:this.state.filterText}),Object(d.jsx)("button",{style:{marginTop:15,color:"white"},type:"submit",className:"btn btn-danger",onClick:this.filterReset,children:this.state.filterResetText})]}),Object(d.jsx)("div",{class:"row",children:Object(d.jsx)("div",{class:"col-md-12 grid-margin stretch-card",children:Object(d.jsx)("div",{class:"card position-relative",children:Object(d.jsx)("div",{class:"card-body",children:Object(d.jsx)("div",{class:"table-responsive",children:Object(d.jsxs)("table",{class:"table table-hover",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Repair Id"}),Object(d.jsx)("th",{children:"Description"}),Object(d.jsx)("th",{children:"Customer"}),Object(d.jsx)("th",{children:"Customer address"}),Object(d.jsx)("th",{children:"Telephone"}),Object(d.jsx)("th",{children:"Repair status"})]})}),Object(d.jsx)("tbody",{children:this.state.filteredRepairs?this.state.filteredRepairs.map((function(t){return Object(d.jsxs)("tr",{onClick:function(){return e.handleRowClick(t.id)},children:[Object(d.jsx)("td",{children:t.id}),Object(d.jsx)("td",{children:t.description.substring(0,20)}),Object(d.jsx)("td",{children:t.username}),Object(d.jsx)("td",{children:t.address}),Object(d.jsx)("td",{children:t.telephone}),Object(d.jsx)("td",{children:Object(d.jsx)(S.a,{style:{backgroundColor:t.color,borderColor:t.color,color:"white",width:"125px"},children:t.status})})]},t.id)})):null})]})})})})})})]}),Object(d.jsx)("footer",{class:"footer",children:Object(d.jsx)("div",{class:"d-sm-flex justify-content-center justify-content-sm-between",children:Object(d.jsx)("span",{class:"text-muted text-center text-sm-left d-block d-sm-inline-block",children:"Copyright \xa9 RWP 2022"})})})]})]})]})}},{key:"componentDidMount",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,a,s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://ensolapi.herokuapp.com/admin/dashboardValues",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 2:t=e.sent,a=t.data,s=a.data.orders.map((function(e){return 0==e.orderStatus?(e.orderStatus="Cancelled",e.color="#F44336"):1==e.orderStatus?(e.orderStatus="Completed",e.color="#4CAF50"):2==e.orderStatus?(e.orderStatus="Accepted",e.color="#3F51B5"):3==e.orderStatus&&(e.orderStatus="Pending",e.color="#FF5722"),{id:e.id,username:e.user.name,address:e.user.address,telephone:e.user.telephone,price:e.price,status:e.orderStatus,color:e.color}})),r=a.data.repairs.map((function(e){return 0==e.status?(e.status="Cancelled",e.color="#F44336"):1==e.status?(e.status="Completed",e.color="#4CAF50"):2==e.status?(e.status="Accepted",e.color="#3F51B5"):3==e.status&&(e.status="Pending",e.color="#FF5722"),{id:e.id,description:e.description,username:e.order.user.name,address:e.order.user.address,telephone:e.order.user.telephone,status:e.status,color:e.color}})),this.setState({orders:s,filteredOrders:s,repairs:r,filteredRepairs:r,repair_count:a.data.top_values.repair_count,total_machines:a.data.top_values.total_machines,rented_machines:a.data.top_values.rented_machines,user_count:a.data.top_values.user_count});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.Component);window.addEventListener("pageshow",(function(e){(e.persisted||"undefined"!=typeof window.performance&&2===window.performance.navigation.type)&&window.location.reload()}));var B=T,F=a(6),E=a(197),_=function(){var e=Object(s.useState)(""),t=Object(F.a)(e,2),a=t[0],r=t[1],n=Object(s.useState)(""),c=Object(F.a)(n,2),l=c[0],o=c[1],j=Object(s.useState)(""),u=Object(F.a)(j,2),p=u[0],x=u[1],m=Object(s.useState)(0),O=Object(F.a)(m,2),f=O[0],y=O[1],D=Object(s.useState)(0),N=Object(F.a)(D,2),I=N[0],P=N[1],R=Object(s.useState)({}),A=Object(F.a)(R,2),M=A[0],T=A[1],B=Object(s.useState)(0),_=Object(F.a)(B,2),L=(_[0],_[1],{serialNumber:a,machineType:l,description:p,rentPrice:f,availableQty:I,machinePhotos:M}),H=function(e){g.b.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})},z=function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=sessionStorage.getItem("token"),a){e.next=5;break}H("Please enter serial number"),e.next=27;break;case 5:if(l){e.next=9;break}H("Please enter machine name"),e.next=27;break;case 9:if(p){e.next=13;break}H("Please enter description"),e.next=27;break;case 13:if(f){e.next=17;break}H("Please enter rent price"),e.next=27;break;case 17:if(I){e.next=21;break}H("Please enter available quantity"),e.next=27;break;case 21:if(M){e.next=25;break}H("Please select image"),e.next=27;break;case 25:return e.next=27,v.a.post("https://ensolapi.herokuapp.com/machine",L,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}}).then((function(e){e.data.status&&(G(e.data.data),window.location.reload())}));case 27:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){console.log(e),g.b.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};function U(){return(U=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.clear(),window.location.href="/";case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(d.jsxs)("div",{className:"container-scroller",children:[Object(d.jsx)("div",{children:Object(d.jsx)(g.a,{})}),Object(d.jsxs)("nav",{className:"navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row",children:[Object(d.jsx)("div",{className:"text-center navbar-brand-wrapper d-flex align-items-center justify-content-center",children:Object(d.jsx)("img",{style:{width:70,height:70},src:w})}),Object(d.jsxs)("div",{className:"navbar-menu-wrapper d-flex align-items-center justify-content-end",children:[Object(d.jsx)("ul",{className:"navbar-nav navbar-nav-right",children:Object(d.jsx)("li",{className:"nav-item nav-profile dropdown",children:Object(d.jsx)("a",{className:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",id:"profileDropdown",children:Object(d.jsx)(k.a,{children:Object(d.jsx)(C.a,{title:sessionStorage.getItem("email"),children:Object(d.jsx)(C.a.Item,{onClick:function(){return U.apply(this,arguments)},children:"Logout"})})})})})}),Object(d.jsx)("button",{className:"navbar-toggler navbar-toggler-right d-lg-none align-self-center",type:"button","data-toggle":"offcanvas",children:Object(d.jsx)("span",{className:"ti-view-list"})})]})]}),Object(d.jsxs)("div",{className:"container-fluid page-body-wrapper",children:[Object(d.jsx)("nav",{className:"sidebar sidebar-offcanvas",id:"sidebar",children:Object(d.jsxs)("ul",{className:"nav",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)("a",{className:"nav-link",href:"/dashboard",children:[Object(d.jsx)("i",{className:"ti-shield menu-icon"}),Object(d.jsx)("span",{className:"menu-title",children:"Dashboard"})]})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)("a",{className:"nav-link","data-bs-toggle":"collapse",href:"/machine","aria-expanded":"false","aria-controls":"ui-basic",children:[Object(d.jsx)("i",{className:"ti-plug menu-icon"}),Object(d.jsx)("span",{className:"menu-title",children:"Machines"})]})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsxs)(i.b,{className:"nav-link",to:"/repairs",children:[Object(d.jsx)("i",{className:"ti-settings menu-icon"}),Object(d.jsx)("span",{className:"menu-title",children:"Repairs"})]})})]})}),Object(d.jsx)("div",{className:"main-panel",children:Object(d.jsxs)("div",{className:"content-wrapper",children:[Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-12 grid-margin",children:Object(d.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:Object(d.jsx)("div",{children:Object(d.jsx)("h4",{className:"font-weight-bold mb-0",children:"Machines"})})})})}),Object(d.jsxs)(E.a,{children:[Object(d.jsxs)(E.a.Group,{className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Serial Number"}),Object(d.jsx)(E.a.Control,{required:!0,type:"text",placeholder:"Enter Serial No",onChange:function(e){r(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Machine Name"}),Object(d.jsx)(E.a.Control,{required:!0,type:"text",placeholder:"Enter Machine Name",onChange:function(e){o(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(d.jsx)(E.a.Label,{children:"Description"}),Object(d.jsx)(E.a.Control,{required:!0,as:"textarea",placeholder:"Enter Your Description",rows:3,onChange:function(e){x(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Rent Price"}),Object(d.jsx)(E.a.Control,{required:!0,type:"number",min:"0",placeholder:"Enter Rent Price",onChange:function(e){y(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Available Quantity"}),Object(d.jsx)(E.a.Control,{required:!0,type:"number",min:"1",placeholder:"Enter Available Quantity",onChange:function(e){P(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{controlId:"formFileMultiple",className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Upload Image"}),Object(d.jsx)(E.a.Control,{type:"file",multiple:!0,onChange:function(e){var t;t=e.target.files[0],T(t)}})]}),Object(d.jsxs)(E.a.Group,{className:"my-3",children:[Object(d.jsx)(S.a,{onClick:z,style:{color:"white"},className:"mr-5",variant:"primary",children:"Insert"})," ",Object(d.jsx)(S.a,{style:{color:"white"},className:"mr-5",variant:"primary",onClick:function(){window.location.reload()},children:"Clear"})," "]})]}),Object(d.jsx)("footer",{className:"footer",children:Object(d.jsx)("div",{className:"d-sm-flex justify-content-center justify-content-sm-between",children:Object(d.jsx)("span",{className:"text-muted text-center text-sm-left d-block d-sm-inline-block",children:"Copyright \xa9 RWP 2022"})})})]})})]})]})},L=a(105),H=a.n(L),z=a(106),G=a.n(z),U=function(){var e=G()(H.a),t=Object(s.useState)(""),a=Object(F.a)(t,2),r=a[0],n=a[1],c=Object(s.useState)(""),i=Object(F.a)(c,2),l=i[0],o=i[1],j=Object(s.useState)(""),u=Object(F.a)(j,2),p=u[0],x=u[1],m=Object(s.useState)(0),O=Object(F.a)(m,2),f=O[0],w=O[1],y=Object(s.useState)(0),k=Object(F.a)(y,2),C=k[0],D=k[1],N=Object(s.useState)({}),I=Object(F.a)(N,2),P=I[0],R=I[1],A=Object(s.useState)({}),M=Object(F.a)(A,2),T=M[0],B=M[1],_=Object(s.useState)(0),L=Object(F.a)(_,2),z=L[0],U=L[1];Object(s.useEffect)(Object(b.a)(h.a.mark((function e(){var t,a,s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URLSearchParams(window.location.search),a=t.get("id"),e.next=4,v.a.get("https://ensolapi.herokuapp.com/machine/"+a,{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 4:s=e.sent,r=s.data,n(r.data.serialNumber),U(r.data.id),w(r.data.rentPrice),x(r.data.description),o(r.data.machineType),D(r.data.availableQty),R(JSON.parse(r.data.images)[0]);case 13:case"end":return e.stop()}}),e)}))),[]);var Q=function(e){console.log(e),g.b.success(e,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)(g.a,{})}),Object(d.jsx)("div",{className:"card",children:Object(d.jsxs)("div",{className:"card-body",children:[Object(d.jsx)("div",{className:"row",children:Object(d.jsx)("div",{className:"col-md-12 grid-margin",children:Object(d.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:Object(d.jsx)("div",{children:Object(d.jsx)("h4",{className:"font-weight-bold mb-0",children:"Manage Machine"})})})})}),Object(d.jsxs)(E.a,{children:[Object(d.jsx)(E.a.Group,{className:"mb-3",children:Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"exampleInputName1",children:"Id"}),Object(d.jsx)("input",{type:"text",className:"form-control",placeholder:"Machine Id",value:z})]})}),Object(d.jsxs)(E.a.Group,{className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Serial Number"}),Object(d.jsx)(E.a.Control,{type:"text",placeholder:"Enter Serial No",value:r,onChange:function(e){n(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Machine Name"}),Object(d.jsx)(E.a.Control,{type:"text",placeholder:"Enter Machine Name",value:l,onChange:function(e){o(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{className:"mb-3",controlId:"exampleForm.ControlTextarea1",children:[Object(d.jsx)(E.a.Label,{children:"Description"}),Object(d.jsx)(E.a.Control,{as:"textarea",placeholder:"Enter Your Description",rows:3,value:p,onChange:function(e){x(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Rent Price"}),Object(d.jsx)(E.a.Control,{type:"text",placeholder:"Enter Rent Price",value:f,onChange:function(e){w(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Available Quantity"}),Object(d.jsx)(E.a.Control,{type:"email",placeholder:"Enter Available Quantity",value:C,onChange:function(e){D(e.target.value)}})]}),Object(d.jsxs)(E.a.Group,{controlId:"formFileMultiple",className:"mb-3",children:[Object(d.jsx)(E.a.Label,{children:"Machine Image"}),Object(d.jsx)("br",{}),Object(d.jsx)("img",{style:{height:300,width:300},alt:"machine image",src:P}),Object(d.jsx)(E.a.Control,{type:"file",multiple:!0,onChange:function(e){var t;t=e.target.files[0],R(URL.createObjectURL(t)),B(t)}})]}),Object(d.jsxs)(E.a.Group,{className:"my-3",children:[Object(d.jsx)(S.a,{onClick:function(){e.fire({title:"Are you sure?",text:"You want to update this?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, update it!",reverseButtons:!0}).then((function(e){if(e.isConfirmed){var t={};r&&(t.serialNumber=r),l&&(t.machineType=l),p&&(t.description=p),f&&(t.rentPrice=f),C&&(t.availableQty=C),T&&(t.machinePhotos=T);var a=sessionStorage.getItem("token");v.a.put("https://ensolapi.herokuapp.com/machine/".concat(z),t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(a)}}).then((function(e){e.data.status&&Q(e.data.data)}))}}))},style:{color:"white"},className:"mr-5",variant:"primary",children:"Update"})," ",Object(d.jsx)(S.a,{style:{color:"white"},className:"mr-5",variant:"primary",onClick:function(){e.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!",showCancelButton:!0,reverseButtons:!0}).then((function(e){if(e.isConfirmed){var t=sessionStorage.getItem("token");v.a.delete("https://ensolapi.herokuapp.com/machine/".concat(z),{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t)}}).then((function(e){e.data.status&&(Q(e.data.data),window.location.href="/machine")}))}}))},children:"Delete"})," "]})]})]})})]})},Q=function(e){Object(m.a)(a,e);var t=Object(O.a)(a);function a(){var e;Object(p.a)(this,a);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).state={machines:[],filteredMachines:[],startDate:new Date,endDate:new Date,filterOn:!1,addText:"Add a Machine"},e.handleRowClick=function(e){window.location.href="/machine/search?id="+e},e.setStartDate=function(t){e.setState({startDate:t})},e.setEndDate=function(t){e.setState({endDate:t})},e.setStartDate2=function(t){e.setState({startDate2:t})},e.handleDateChange=function(t){e.state.startDate=t},e.logOut=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sessionStorage.clear(),window.location.href="/";case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.filterReset=function(){var t=Object(b.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.state.filterOn=!1,e.setState({filteredOrders:e.state.machines});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.machineAddHandler=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),window.location.href="/machine/add";case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(x.a)(a,[{key:"render",value:function(){var e=this;return Object(d.jsxs)("div",{class:"container-scroller",children:[Object(d.jsxs)("nav",{class:"navbar col-lg-12 col-12 p-0 fixed-top d-flex flex-row",children:[Object(d.jsx)("div",{class:"text-center navbar-brand-wrapper d-flex align-items-center justify-content-center",children:Object(d.jsx)("img",{style:{width:70,height:70},src:w})}),Object(d.jsxs)("div",{class:"navbar-menu-wrapper d-flex align-items-center justify-content-end",children:[Object(d.jsx)("ul",{class:"navbar-nav navbar-nav-right",children:Object(d.jsx)("li",{class:"nav-item nav-profile dropdown",children:Object(d.jsx)("a",{class:"nav-link dropdown-toggle","data-bs-toggle":"dropdown",id:"profileDropdown",children:Object(d.jsx)(k.a,{children:Object(d.jsx)(C.a,{title:sessionStorage.getItem("email"),children:Object(d.jsx)(C.a.Item,{onClick:this.logOut,children:"Logout"})})})})})}),Object(d.jsx)("button",{class:"navbar-toggler navbar-toggler-right d-lg-none align-self-center",type:"button","data-toggle":"offcanvas",children:Object(d.jsx)("span",{class:"ti-view-list"})})]})]}),Object(d.jsxs)("div",{class:"container-fluid page-body-wrapper",children:[Object(d.jsx)("nav",{class:"sidebar sidebar-offcanvas",id:"sidebar",children:Object(d.jsxs)("ul",{class:"nav",children:[Object(d.jsx)("li",{class:"nav-item",children:Object(d.jsxs)("a",{class:"nav-link",href:"/dashboard",children:[Object(d.jsx)("i",{class:"ti-shield menu-icon"}),Object(d.jsx)("span",{class:"menu-title",children:"Dashboard"})]})}),Object(d.jsx)("li",{class:"nav-item",children:Object(d.jsxs)("a",{class:"nav-link","data-bs-toggle":"collapse",href:"/machine","aria-expanded":"false","aria-controls":"ui-basic",children:[Object(d.jsx)("i",{class:"ti-plug menu-icon"}),Object(d.jsx)("span",{class:"menu-title",children:"Machines"})]})}),Object(d.jsx)("li",{class:"nav-item",children:Object(d.jsxs)(i.b,{class:"nav-link",to:"/repairs",children:[Object(d.jsx)("i",{className:"ti-settings menu-icon"}),Object(d.jsx)("span",{class:"menu-title",children:"Repairs"})]})})]})}),Object(d.jsxs)("div",{class:"main-panel",children:[Object(d.jsxs)("div",{class:"content-wrapper",children:[Object(d.jsx)("div",{class:"row",children:Object(d.jsx)("div",{class:"col-md-12 grid-margin",children:Object(d.jsx)("div",{class:"d-flex justify-content-between align-items-center",children:Object(d.jsx)("div",{children:Object(d.jsx)("h4",{class:"font-weight-bold mb-0",children:"Machines"})})})})}),Object(d.jsx)("div",{style:{textAlign:"right"},children:Object(d.jsx)("button",{style:{marginTop:15,color:"white",marginBottom:15},type:"submit",class:"btn btn-warning me-2",onClick:this.machineAddHandler,children:this.state.addText})}),Object(d.jsx)("div",{class:"row",children:Object(d.jsx)("div",{class:"col-md-12 grid-margin stretch-card",children:Object(d.jsx)("div",{class:"card position-relative",children:Object(d.jsx)("div",{class:"card-body",children:Object(d.jsx)("div",{class:"table-responsive",children:Object(d.jsxs)("table",{class:"table table-hover",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Machine Id"}),Object(d.jsx)("th",{children:"Machine Type"}),Object(d.jsx)("th",{children:"Description"}),Object(d.jsx)("th",{children:"Rent Price(LKR)"}),Object(d.jsx)("th",{children:"Available Quantity"}),Object(d.jsx)("th",{children:"Image"})]})}),Object(d.jsx)("tbody",{children:this.state.filteredMachines?this.state.filteredMachines.map((function(t){return Object(d.jsxs)("tr",{onClick:function(){return e.handleRowClick(t.id)},children:[Object(d.jsx)("td",{children:t.id}),Object(d.jsx)("td",{children:t.machineType}),Object(d.jsx)("td",{children:t.description.substring(0,20)}),Object(d.jsx)("td",{children:t.rentPrice}),Object(d.jsx)("td",{children:t.availableQuantity}),Object(d.jsx)("td",{children:Object(d.jsx)("img",{style:{height:100,width:100},alt:"machine image",src:t.image})})]},t.id)})):null})]})})})})})})]}),Object(d.jsx)("footer",{class:"footer",children:Object(d.jsx)("div",{class:"d-sm-flex justify-content-center justify-content-sm-between",children:Object(d.jsx)("span",{class:"text-muted text-center text-sm-left d-block d-sm-inline-block",children:"Copyright \xa9 RWP 2022"})})})]})]})]})}},{key:"componentDidMount",value:function(){var e=Object(b.a)(h.a.mark((function e(){var t,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://ensolapi.herokuapp.com/machine",{headers:{Authorization:"Bearer "+sessionStorage.getItem("token")}});case 2:t=e.sent,a=t.data,s=a.data.map((function(e){return{id:e.id,machineType:e.machineType,description:e.description,rentPrice:e.rentPrice,availableQuantity:e.availableQty,image:JSON.parse(e.images)[0]}})),this.setState({machines:s,filteredMachines:s});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(s.Component);window.addEventListener("pageshow",(function(e){(e.persisted||"undefined"!=typeof window.performance&&2===window.performance.navigation.type)&&window.location.reload()}));var V=Q;c.a.render(Object(d.jsx)(i.a,{children:Object(d.jsx)(r.a.Fragment,{children:Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",element:Object(d.jsx)(y,{})}),Object(d.jsx)(l.a,{exact:!0,path:"/dashboard",element:Object(d.jsx)(R,{})}),Object(d.jsx)(l.a,{exact:!0,path:"/machine/:id",element:Object(d.jsx)(U,{})}),Object(d.jsx)(l.a,{exact:!0,path:"/machine/add",element:Object(d.jsx)(_,{})}),Object(d.jsx)(l.a,{exact:!0,path:"/machine",element:Object(d.jsx)(V,{})}),Object(d.jsx)(l.a,{exact:!0,path:"/repairs",element:Object(d.jsx)(B,{})}),Object(d.jsx)(l.a,{path:"/orders/:id",element:Object(d.jsx)(A,{})}),Object(d.jsx)(l.a,{path:"/repairs/:id",element:Object(d.jsx)(M,{})})]})})}),document.getElementById("root")),o()},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},94:function(e,t,a){}},[[169,1,2]]]);
//# sourceMappingURL=main.ec93699b.chunk.js.map